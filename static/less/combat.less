@import "base.less";
@import "colors.less";

.fight-graphics {
    .swatch;
    padding: 0;

    width: @combatwidth;
    height: @screenheight;

    display: inline-block;
    vertical-align: top;
}

.combat {
    display: inline-block;
}

.exercise-view {
    .swatch;
    width: @screenwidth - @combatwidth;
    max-width: @screenwidth - @combatwidth;
    height: @exerciseheight;
    max-height: @exerciseheight;
    overflow: auto;
}

.buttons-area {
    padding: 0 20px;
    .retreat {
        float: left;
    }
    .cast {
        float: right;
    }

    .retreat, .cast {
        display: inline-block;

        &.shake {
            @-webkit-keyframes spaceboots {
                0% { -webkit-transform: translate(2px, 1px) rotate(0deg); }
                10% { -webkit-transform: translate(-1px, -2px) rotate(-1deg); }
                20% { -webkit-transform: translate(-3px, 0px) rotate(1deg); }
                30% { -webkit-transform: translate(0px, 2px) rotate(0deg); }
                40% { -webkit-transform: translate(1px, -1px) rotate(1deg); }
                50% { -webkit-transform: translate(-1px, 2px) rotate(-1deg); }
                60% { -webkit-transform: translate(-3px, 1px) rotate(0deg); }
                70% { -webkit-transform: translate(2px, 1px) rotate(-1deg); }
                80% { -webkit-transform: translate(-1px, -1px) rotate(1deg); }
                90% { -webkit-transform: translate(2px, 2px) rotate(0deg); }
                100% { -webkit-transform: translate(1px, -2px) rotate(-1deg); }
            }
            &:hover,
            &:focus {
                -webkit-animation-name: spaceboots;
                -webkit-animation-duration: 0.8s;
                -webkit-transform-origin:50% 50%;
                -webkit-animation-iteration-count: infinite;
                -webkit-animation-timing-function: linear;
            }
        }
    }
}


@monstersize: 144px;
@centerline: 40px;
@monstervangaurd: -10px;

.combat-background {
    height: 100%;
    position: relative;
    background-image: url(/static/img/forest.jpg);
    background-position-x: 1122px;
    background-position-y: -120px;

    .entity {
        &.selectable:hover {
            box-shadow: inset 0 0 10px rgba(0, 0, 0, 0.9);
        }

        position: absolute;

        &:nth-child(1) {
            bottom: @centerline;
            right: @monstervangaurd;
            z-index: 99;
        }
        &:nth-child(2) {
            bottom: @centerline;
            left: @monstervangaurd;
            z-index: 50;
        }
        &:nth-child(3) {
            bottom: @centerline - 50px;
            left: @monstervangaurd + 60px;
            transform: scale(1.1);
            z-index: 75;
        }
        &:nth-child(4) {
            bottom: @centerline + 50px;
            left: @monstervangaurd + 60px;
            z-index: 25;
            transform: scale(0.9);
        }

        .health-bar {
            &.full-health {
                visibility: hidden;
            }

            position: absolute;
            bottom: 5px;

            left: 0;
            right: 0;
            margin: 0 auto;

            display: inline-block;
            @height: 14px; // if you adjust this, adjust the .filled top
            @borderSize: 2px;
            width: 70px;

            border: @borderSize solid #fafafa;
            background-color: rgba(255, 255, 255, 0.3);

            white-space: nowrap;
            height: @height;

            .filled {
                position: relative;
                top: -5px; // TODO(dmnd): not sure why this is needed :(

                display: inline-block;
                height: @height - 2 * @borderSize;
                background-color: #8a0000;
                transition: width .5s ease-out;
            }

            span {
                position: relative;
                top: -6px; // TODO(dmnd): vertical-align?

                color: #fff;
                font-size: 10px;
                margin: 0 5px;
                line-height: 20px;
                text-shadow: #333 -1px -1px;
            }
        }

    }

}
